# ğŸŒŒ SON1KVERS3 ALFA-SSV - CURSOR RULES Ã‰PICAS

## ğŸ¯ MISIÃ“N CRÃTICA
Deploy completo de Son1kVers3 ALFA-SSV - Plataforma de democratizaciÃ³n musical con IA

## ğŸ—ï¸ ARQUITECTURA MONOREPO
```
ALFA-SSV/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web-classic/           # Dashboard principal con Auth
â”‚   â”œâ”€â”€ nexus-visual/          # Lluvia de kanjis + modo NEXUS Ã©pico
â”‚   â”œâ”€â”€ ghost-studio/          # DAW con nueva interfaz
â”‚   â”œâ”€â”€ nova-post-pilot/       # AI Marketing con nueva UI
â”‚   â”œâ”€â”€ sanctuary-social/      # Chat activo + social
â”‚   â”œâ”€â”€ the-generator/         # GeneraciÃ³n musical IA
â”‚   â”œâ”€â”€ pixel-perfect/         # App 100% funcional
â”‚   â””â”€â”€ backend/               # API Node.js + TypeScript
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ ui/                    # Componentes compartidos
â”‚   â”œâ”€â”€ auth/                  # Sistema auth unificado
â”‚   â”œâ”€â”€ database/              # Prisma + schemas
â”‚   â””â”€â”€ utils/                 # Utilidades compartidas
â””â”€â”€ infrastructure/
    â”œâ”€â”€ docker/
    â””â”€â”€ nginx/
```

## ğŸ› ï¸ STACK TECNOLÃ“GICO COMPLETO

### Frontend (Todas las Apps)
- **Framework**: React 18 + TypeScript (strict mode)
- **Build**: Vite 5+ (optimizado)
- **Styling**: Tailwind CSS + Framer Motion
- **State**: Zustand (global) + React Query (data fetching)
- **Routing**: React Router v6
- **Audio**: Tone.js + Web Audio API
- **Animations**: Framer Motion + GSAP (para animaciones Ã©picas)
- **Forms**: React Hook Form + Zod validation
- **Icons**: Lucide React

### Backend (apps/backend/)
- **Runtime**: Node.js 20+ + TypeScript
- **Framework**: Express.js 4.18+ (producciÃ³n-ready)
- **ORM**: Prisma 5.8+ con PostgreSQL 16
- **Cache**: Redis 7+ (sessions + rate limiting)
- **Queue**: BullMQ (para generaciÃ³n musical async)
- **Real-time**: Socket.io 4.6+ (para chat + colaboraciÃ³n)
- **Storage**: AWS S3 / Supabase Storage (audio files)
- **Auth**: JWT + OAuth2 (Google, Facebook, TikTok)
- **Payments**: Stripe (subscriptions)
- **AI**: OpenAI API / Qwen / SunoAPI para mÃºsica

## ğŸ¨ DESIGN SYSTEM UNIFIED

### Colores Base
```css
/* Theme Principal */
--bg-primary: #0A0C10;      /* CarbÃ³n profundo */
--bg-secondary: #1a1d29;    /* Gris oscuro */
--bg-glass: rgba(255,255,255,0.05); /* Glassmorphism */

/* Colores Principales */
--cyan: #00FFE7;            /* Cian brillante */
--magenta: #B84DFF;         /* Magenta/pÃºrpura */
--accent: #9AF7EE;          /* Acento cian suave */
--gold: #FFD700;            /* Oro (modo NEXUS) */
--red: #FF1744;             /* Rojo Ã©pico (Super Saiyan) */
```

### Efectos y Animaciones
```css
/* Glassmorphism */
.glass {
  backdrop-blur: blur(20px);
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
}

/* Glow Effects */
.glow-cyan { box-shadow: 0 0 20px rgba(0,255,231,0.5); }
.glow-gold { box-shadow: 0 0 30px rgba(255,215,0,0.8); }
.glow-red { box-shadow: 0 0 40px rgba(255,23,68,0.9); }
```

## ğŸ” SISTEMA DE AUTENTICACIÃ“N UNIFICADO

### OAuth2 Providers
- **Google OAuth** (primary)
- **Facebook OAuth**
- **TikTok OAuth** (si disponible)
- **Email/Password** (fallback)

### JWT Token Structure
```typescript
{
  userId: string;
  email: string;
  role: 'user' | 'admin' | 'tester';
  tier: 'free' | 'pro' | 'premium' | 'enterprise';
  permissions: string[];
  alvaeSymbol?: boolean; // Solo admins/testers
  iat: number;
  exp: number;
}
```

### Tiers y Permisos
- **Free**: 3 generaciones/dÃ­a, 1 proyecto
- **Pro**: 10 generaciones/dÃ­a, 5 proyectos
- **Premium**: 50 generaciones/dÃ­a, 20 proyectos + Nexus
- **Enterprise**: Ilimitado + todas las features

## ğŸ­ ANIMACIÃ“N Ã‰PICA - MODO NEXUS

### ActivaciÃ³n
- **Click**: BotÃ³n "ğŸŒŒ ACTIVATE NEXUS"
- **Keyboard**: `Shift + N`
- **Requirement**: Permisos de admin/tester o sÃ­mbolo ALVAE

### Secuencia de AnimaciÃ³n
1. **Screen Flash** (0-0.5s) - Flash blanco + sonido de trueno
2. **ALVAE Symbol Emergence** (0.5-2s) - SÃ­mbolo aparece con glow dorado
3. **Transformation** (2-4s) - Kanjis se vuelven dorados, velocidad 3x
4. **Super Saiyan Peak** (4-5s) - Aura dorada, rayos continuos
5. **Settle** (5-6s) - EstabilizaciÃ³n del modo NEXUS

## ğŸ“ CÃ“DIGO RULES ESTRICTAS

### TypeScript
- âœ… **SIEMPRE**: Tipos explÃ­citos en funciones pÃºblicas
- âœ… **SIEMPRE**: Interfaces para objects complejos
- âœ… **SIEMPRE**: Enums para conjuntos cerrados
- âœ… **SIEMPRE**: Zod para validaciÃ³n runtime
- âŒ **NUNCA**: `any` type (usar `unknown`)
- âŒ **NUNCA**: Type assertions innecesarios

### React Patterns
- âœ… **SIEMPRE**: Componentes funcionales
- âœ… **SIEMPRE**: Hooks primero, effects despuÃ©s
- âœ… **SIEMPRE**: Early returns para loading/error
- âŒ **NUNCA**: Class components
- âŒ **NUNCA**: LÃ³gica compleja en JSX

### State Management
- âœ… **SIEMPRE**: Zustand para global state
- âœ… **SIEMPRE**: React Query para data fetching
- âœ… **SIEMPRE**: Local state para UI state
- âŒ **NUNCA**: Redux (overkill para este proyecto)

### Backend Patterns
- âœ… **SIEMPRE**: Controllers â†’ Services â†’ Database
- âœ… **SIEMPRE**: Middleware para cross-cutting concerns
- âœ… **SIEMPRE**: Validation con Zod
- âœ… **SIEMPRE**: Error handling centralizado
- âœ… **SIEMPRE**: Logging estructurado
- âŒ **NUNCA**: LÃ³gica de negocio en controllers
- âŒ **NUNCA**: SQL raw queries (usar Prisma)

## ğŸµ INTEGRACIÃ“N SUNO AI

### ConfiguraciÃ³n
```typescript
const SUNO_CONFIG = {
  BASE_URL: 'https://ai.imgkits.com/suno',
  POLLING_URL: 'https://usa.imgkits.com/node-api/suno',
  AUTH_TOKEN: 'Bearer YOUR_TOKEN'
};
```

### Endpoints
- `POST /api/suno-generate` - Generar mÃºsica
- `GET /api/suno-health` - Estado del servicio
- `POST /api/suno-poll` - Polling de generaciÃ³n

## ğŸš€ DEPLOYMENT STRATEGY

### Frontend (Vercel)
- Deploy individual apps
- Environment variables por app
- Custom domains por subdomain

### Backend (Netlify Functions)
- Serverless functions
- Edge caching
- Rate limiting

### Database (Supabase)
- PostgreSQL managed
- Real-time subscriptions
- Row Level Security

## ğŸ§ª TESTING STRATEGY

### Unit Tests
- Jest + React Testing Library
- Coverage >80%
- Mock external APIs

### Integration Tests
- Supertest para API
- Database seeding
- Cleanup automÃ¡tico

### E2E Tests
- Playwright
- Critical user flows
- Cross-browser testing

## ğŸ“Š MONITOREO Y ANALYTICS

### MÃ©tricas Trackeadas
- Generaciones totales por usuario/tier
- Tiempo promedio de generaciÃ³n
- Usuarios activos en tiempo real
- RotaciÃ³n de tokens y uso
- Performance de funciones
- Errores y debugging

## ğŸ¯ SPRINT Ã‰PICO - FASES

### FASE 1: FUNDACIÃ“N BACKEND (DÃA 1-2)
- Estructura completa del backend
- Auth OAuth mÃºltiple
- Database schema completo
- Suno AI integration
- Stripe payments

### FASE 2: FRONTEND APPS (DÃA 3-5)
- Web-classic dashboard
- Nexus Visual Ã©pico
- The Generator
- Ghost Studio DAW

### FASE 3: SOCIAL & MARKETING (DÃA 6-7)
- Sanctuary Social chat
- Nova Post Pilot
- Pixel Perfect App

### FASE 4: DEPLOYMENT & TESTING (DÃA 8-9)
- Deploy completo
- Testing exhaustivo
- Performance optimization

### FASE 5: POLISH & LAUNCH (DÃA 10)
- UI/UX polish
- Documentation
- Launch preparation

## ğŸš¨ REGLAS CRÃTICAS

1. **NUNCA** comprometer la calidad por velocidad
2. **SIEMPRE** seguir TypeScript strict mode
3. **SIEMPRE** implementar error handling completo
4. **SIEMPRE** escribir tests para cÃ³digo crÃ­tico
5. **SIEMPRE** documentar APIs y componentes complejos
6. **NUNCA** hardcodear secrets o configuraciones
7. **SIEMPRE** usar environment variables
8. **SIEMPRE** implementar logging estructurado
9. **NUNCA** dejar TODOs en cÃ³digo de producciÃ³n
10. **SIEMPRE** optimizar para performance

## ğŸ­ MODO NEXUS ACTIVADO
Cuando veas este sÃ­mbolo: ğŸŒŒ
Significa que el cÃ³digo debe ser Ã‰PICO, no solo funcional.

Â¡Democratizando la mÃºsica con IA, una generaciÃ³n a la vez! ğŸµ